<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>C 语言 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="C 语言" class="main-title"></div></div></header><article><div class="wolai-block wolai-text"><div><span class="inline-wrap">部分内容来自网道项目（阮一峰）</span></div></div><div class="wolai-bookmark wolai-block"><a href="https://wangdoc.com/clang/index.html">C 语言教程</a><div class="info-box"><div class="text-pane"><div data-title="C 语言教程"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://wangdoc.com/clang/assets/icons/android-icon-192x192.png&quot;)"></div><div data-hostname="wangdoc.com"></div></div></div><div class="preview-pane"></div></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">代码测试来自 WSL2 Ubuntu</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-sub-page wolai-block"><div class="page-icon"></div><a href="sysprak%20%E7%BB%83%E4%B9%A0/sysprak%20%E7%BB%83%E4%B9%A0.html"><span>sysprak 练习</span></a></div><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">makefile</span></summary><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>cat -e -t -v makefile_name</code></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">makefile syntax can be quirky
if you want a line of code to be interpreted as </span><span class="inline-wrap"><code>make</code></span><span class="inline-wrap"> code it must only be indented with </span><span class="inline-wrap"><b>spaces</b></span><span class="inline-wrap">.
if you want a line of code to be interpreted as </span><span class="inline-wrap"><code>bash</code></span><span class="inline-wrap"> code it must only be indented with </span><span class="inline-wrap"><b>tabs</b></span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">在</span><span class="inline-wrap"><code>:set expandtab</code></span><span class="inline-wrap"> 的状态下强制输入制表符： </span><span class="inline-wrap"><code>ctrl+v+tab</code></span></div></div></div></details><details class="wolai-block"><summary><div class="marker"></div><h3><span class="inline-wrap">目录</span></h3></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#oty1HA8pXf5Bw4redoYonS" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">基础语法</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#omTwGaTDDJw3vgffycoe9q" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">变量</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#kS8L9GAkGVxpjHmBaDAMqT" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">运算符</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#ojpizqx5KSYHnNQBVYcbTW" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">流程控制</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#cRWFeEQt1gQwsYrgzwR1pH" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">数据类型</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#ukoFDkJRGR4MxfeAfN7421" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">指针</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#xwRQuXbGy2nLc6CimhHphP" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">函数</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#qs2KwgXvXLaJsbTczeYoQ8" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">数组</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#xe3EDxMnE4acyE6THLviyP" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">字符串</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#fnprjzg8LQaJkMJtxYYp6v" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">内存管理</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#pyvef1zsK8XPXYFVSvbDMa" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">struct</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#nFyzEQe5kGkE3G55wrpYpv" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">typedef</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#6fsCcyZ9hE2mHVPNFvo7TY" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">Union</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#xwrE3mwSbCPxaSkb2o7TeF" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">Enum</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#awfNHvvj2F8zZGuwxayaaQ" class="wolai-bi-link"><span><span class="embed-jiu embed-h2"></span><span class="inline-wrap">预处理器</span></span></a></span></div></div></details><h2 class="wolai-block"><span class="inline-wrap">基础语法</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">/* */ 注释可以用于行内代码之间，会被替换成一个空格</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%f</code></span><span class="inline-wrap"> 包含 float 和 double, </span><span class="inline-wrap"><code>h</code></span><span class="inline-wrap">代表<span class="jill"></span>short, </span><span class="inline-wrap"><code>l</code></span><span class="inline-wrap"> long, </span><span class="inline-wrap"><code>e</code></span><span class="inline-wrap"> 或</span><span class="inline-wrap"><code>E</code></span><span class="inline-wrap">使用科学计数法的浮点数</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">format 默认右对齐, </span><span class="inline-wrap"><code>6.2</code></span><span class="inline-wrap">占<span class="jill"></span>6<span class="jill"></span>位，显示<span class="jill"></span>2<span class="jill"></span>位小数，</span><span class="inline-wrap"><code>-</code></span><span class="inline-wrap">左对齐， </span><span class="inline-wrap"><code>+</code></span><span class="inline-wrap"> 显示正负号</span></summary><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%6.2f\n"</span><span class="token punctuation">,</span> <span class="token number">4.543255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%-6.2f\n"</span><span class="token punctuation">,</span> <span class="token number">4.543255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%-+6.2f\n"</span><span class="token punctuation">,</span> <span class="token number">4.543255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
   4.54
4.54
+4.54
*/</span></pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token comment">/* %*.*f的两个星号通过printf()的两个参数6和2传入。 */</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%*.*f\n"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">format 占位符一览</span></summary><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%a</code></span><span class="inline-wrap">：浮点数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%A</code></span><span class="inline-wrap">：浮点数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%c</code></span><span class="inline-wrap">：字符。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%d</code></span><span class="inline-wrap">：十进制整数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%e</code></span><span class="inline-wrap">：使用科学计数法的浮点数，指数部分的</span><span class="inline-wrap"><code>e</code></span><span class="inline-wrap">为小写。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%E</code></span><span class="inline-wrap">：使用科学计数法的浮点数，指数部分的</span><span class="inline-wrap"><code>E</code></span><span class="inline-wrap">为大写。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%i</code></span><span class="inline-wrap">：整数，基本等同于</span><span class="inline-wrap"><code>%d</code></span><span class="inline-wrap">。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%f</code></span><span class="inline-wrap">：小数（包含</span><span class="inline-wrap"><code>float</code></span><span class="inline-wrap">类型和</span><span class="inline-wrap"><code>double</code></span><span class="inline-wrap">类型）。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%g</code></span><span class="inline-wrap">：6<span class="jill"></span>个有效数字的浮点数。整数部分一旦超过<span class="jill"></span>6<span class="jill"></span>位，就会自动转为科学计数法，指数部分的</span><span class="inline-wrap"><code>e</code></span><span class="inline-wrap">为小写。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%G</code></span><span class="inline-wrap">：等同于</span><span class="inline-wrap"><code>%g</code></span><span class="inline-wrap">，唯一的区别是指数部分的</span><span class="inline-wrap"><code>E</code></span><span class="inline-wrap">为大写。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%hd</code></span><span class="inline-wrap">：十进制 short int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%ho</code></span><span class="inline-wrap">：八进制 short int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%hx</code></span><span class="inline-wrap">：十六进制 short int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%hu</code></span><span class="inline-wrap">：unsigned short int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%ld</code></span><span class="inline-wrap">：十进制 long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%lo</code></span><span class="inline-wrap">：八进制 long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%lx</code></span><span class="inline-wrap">：十六进制 long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%lu</code></span><span class="inline-wrap">：unsigned long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%lld</code></span><span class="inline-wrap">：十进制 long long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%llo</code></span><span class="inline-wrap">：八进制 long long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%llx</code></span><span class="inline-wrap">：十六进制 long long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%llu</code></span><span class="inline-wrap">：unsigned long long int 类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%Le</code></span><span class="inline-wrap">：科学计数法表示的 long double 类型浮点数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%Lf</code></span><span class="inline-wrap">：long double 类型浮点数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%n</code></span><span class="inline-wrap">：已输出的字符串数量。该占位符本身不输出，只将值存储在指定变量之中。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%o</code></span><span class="inline-wrap">：八进制整数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%p</code></span><span class="inline-wrap">：指针。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%s</code></span><span class="inline-wrap">：字符串。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%u</code></span><span class="inline-wrap">：无符号整数（unsigned int）。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%x</code></span><span class="inline-wrap">：十六进制整数。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%zd</code></span><span class="inline-wrap">：</span><span class="inline-wrap"><code>size_t</code></span><span class="inline-wrap">类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>%%</code></span><span class="inline-wrap">：输出一个百分号。</span></li></ul></details><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>#include</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>#define</code></span><span class="inline-wrap"> 不用分号结尾</span></li></ul></h2><h2 class="wolai-block"><span class="inline-wrap">变量</span><h3 class="wolai-block"><span class="inline-wrap">C<span class="jill"></span>标识符规范</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">只能由字母（包括大写和小写）、数字和下划线（</span><span class="inline-wrap"><code>_</code></span><span class="inline-wrap">）组成。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">不能以数字开头。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">长度不能超过<span class="jill"></span>63<span class="jill"></span>个字符。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">区分大小写</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">保留关键字</span></summary><div class="wolai-block wolai-text"><div><span class="inline-wrap">auto, break, case, char, const, continue, default, do, double, else, enum, extern, float, for, goto, if, inline, int, long, register, restrict, return, short, signed, sizeof, static, struct, switch, typedef, union, unsigned, void, volatile, while</span></div></div></details><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">保留 </span><span class="inline-wrap"><code>__变量名</code></span></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">变量的作用域</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>块作用域（block scope）</b></span><span class="inline-wrap">指的是由大括号（</span><span class="inline-wrap"><code>{}</code></span><span class="inline-wrap">）组成的代码块，它形成一个单独的作用域</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">内层代码块中使用外层声明的变量，只在当前作用域生效，不会覆盖外层声明的变量</span></div></div></h3></h2><h2 class="wolai-block"><span class="inline-wrap">运算符</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">多个运算符不宜连用， </span><span class="inline-wrap"><code>i &lt; j &lt; k</code></span><span class="inline-wrap"> 会执行 </span><span class="inline-wrap"><code>(i &lt; j) &lt; k</code></span><span class="inline-wrap"> , 其中 </span><span class="inline-wrap"><code>(i &lt; j)</code></span><span class="inline-wrap"> 返回 </span><span class="inline-wrap"><code>0</code></span><span class="inline-wrap"> 或 </span><span class="inline-wrap"><code>1</code></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">右移运算符 </span><span class="inline-wrap"><code>&gt;&gt;</code></span><span class="inline-wrap"> 最好只用于无符号整数，不要用于负数。因为不同系统对于右移后如何处理负数的符号位，有不同的做法，可能会得到不一样的结果。(逻辑右移：直接补<span class="jill"></span>0；算术右移: 补最高位值）</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>运算符优先级</b></span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">（按照从高到低排列)</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">圆括号（</span><span class="inline-wrap"><code>()</code></span><span class="inline-wrap">）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">自增运算符（</span><span class="inline-wrap"><code>++</code></span><span class="inline-wrap">），自减运算符（</span><span class="inline-wrap"><code>--</code></span><span class="inline-wrap">）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">一元运算符（</span><span class="inline-wrap"><code>+</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>-</code></span><span class="inline-wrap">）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">乘法（</span><span class="inline-wrap"><code>*</code></span><span class="inline-wrap">），除法（</span><span class="inline-wrap"><code>/</code></span><span class="inline-wrap">）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">加法（</span><span class="inline-wrap"><code>+</code></span><span class="inline-wrap">），减法（</span><span class="inline-wrap"><code>-</code></span><span class="inline-wrap">）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">关系运算符（</span><span class="inline-wrap"><code>&lt;</code></span><span class="inline-wrap">、</span><span class="inline-wrap"><code>&gt;</code></span><span class="inline-wrap">等）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">赋值运算符（</span><span class="inline-wrap"><code>=</code></span><span class="inline-wrap">）</span></li></ul></div></h2><h2 class="wolai-block"><span class="inline-wrap">流程控制</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">goto</span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">！不要轻易使用</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">与 </span><span class="inline-wrap"><code>label_name: </code></span><span class="inline-wrap"> 配合使用</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">一个主要用法是跳出多层循环</span></li></ul></div></h2><h2 class="wolai-block"><span class="inline-wrap">数据类型</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">pass</span></div></div></h2><h2 class="wolai-block"><span class="inline-wrap">指针</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">指针本质上就是一个无符号整数，代表了内存地址</span></div></div><h3 class="wolai-block"><span class="inline-wrap">指针的初始化</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">;</span>
<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 错误, 因为指针指向了随机地址</span>

<span class="token keyword">int</span> i<span class="token punctuation">;</span>
<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span> <span class="token comment">// 正确</span></pre></div></code-block></h3><h3 class="wolai-block"><span class="inline-wrap">指针的运算</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">指针只能与整数值</span><span class="inline-wrap"><b>相加</b></span><span class="inline-wrap">，两个指针相加是非法的。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">指针运算中的</span><span class="inline-wrap"><code>1</code></span><span class="inline-wrap"> 是单位，与指针类型相关。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">short</span><span class="token operator">*</span> j<span class="token punctuation">;</span>
j <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0x1234</span><span class="token punctuation">;</span>
j <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 0x1236, 因为 sizeof(short)为2</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">相同类型的指针允许进行</span><span class="inline-wrap"><b>减法</b></span><span class="inline-wrap">运算，返回它们之间的距离，即相隔多少个数据单位，减法返回的值属于</span><span class="inline-wrap"><code>ptrdiff_t</code></span><span class="inline-wrap">类型，这是一个带符号的整数类型别名。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">指针</span><span class="inline-wrap"><b>比较</b></span><span class="inline-wrap">运算比较哪个内存地址更大，返回</span><span class="inline-wrap"><code>0</code></span><span class="inline-wrap">或</span><span class="inline-wrap"><code>1</code></span><span class="inline-wrap">.</span></div></div></h3></h2><h2 class="wolai-block"><span class="inline-wrap">函数</span><h3 class="wolai-block"><span class="inline-wrap">传参方式</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>传值</b></span></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> temp<span class="token punctuation">;</span>
  temp <span class="token operator">=</span> x<span class="token punctuation">;</span>
  x <span class="token operator">=</span> y<span class="token punctuation">;</span>
  y <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token function">Swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无效</span>
</pre></div></code-block></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>传地址</b></span></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> temp<span class="token punctuation">;</span>
  temp <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span>
  <span class="token operator">*</span>x <span class="token operator">=</span> <span class="token operator">*</span>y<span class="token punctuation">;</span>
  <span class="token operator">*</span>y <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block></div></h3><h3 class="wolai-block"><span class="inline-wrap">函数指针</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://wangdoc.com/clang/function.html#函数指针"><span>https://wangdoc.com/clang/function.html#函数指针</span></a></span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">向函数地址的指针</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">示例 (</span><span class="inline-wrap"><code>&amp;print</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>print</code></span><span class="inline-wrap">效果一样)</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>print_ptr<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>print<span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token operator">*</span>print_ptr<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">这种特性的一个应用是，如果一个函数的参数或返回值，也是一个函数，那么函数原型可以写成下面这样。</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>myfunc<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">函数</span><span class="inline-wrap"><code>compute()</code></span><span class="inline-wrap">的第一个参数也是一个函数。</span></div></div></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">注意：函数不要返回内部变量的指针, 当函数结束时，内部变量就消失了</span></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span><span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> i<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 返回了无效地址 &amp;i，非常危险</span></pre></div></code-block></div></h3><h3 class="wolai-block"><span class="inline-wrap">exit()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>exit()</code></span><span class="inline-wrap">函数用来终止整个程序的运行。一旦执行到该函数，程序就会立即结束。该函数的原型定义在头文件</span><span class="inline-wrap"><code>stdlib.h</code></span><span class="inline-wrap">里面。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>atexit()</code></span><span class="inline-wrap">函数，用来登记</span><span class="inline-wrap"><code>exit()</code></span><span class="inline-wrap">执行时额外执行的函数, 函数原型定义在头文件</span><span class="inline-wrap"><code>stdlib.h</code></span><span class="inline-wrap">。</span></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">atexit</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>func<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></div></h3><h3 class="wolai-block"><span class="inline-wrap">函数说明符</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>extern</b></span><div class="wolai-block wolai-text"><div><span class="inline-wrap">当用到其他文件声明的函数，需要给出外部函数的原型，并用</span><span class="inline-wrap"><code>extern</code></span><span class="inline-wrap">说明该函数来自其他文件。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">extern</span> <span class="token keyword">int</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg1<span class="token punctuation">,</span> <span class="token keyword">char</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">函数原型默认就是</span><span class="inline-wrap"><code>extern</code></span><span class="inline-wrap">，所以这里不加</span><span class="inline-wrap"><code>extern</code></span><span class="inline-wrap">，效果是一样的。</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>static</b></span><div class="wolai-block wolai-text"><div><span class="inline-wrap">修饰</span><span class="bg-lightgray inline-wrap">函数本身</span><span class="inline-wrap">或</span><span class="bg-lightgray inline-wrap">函数内部的变量</span><span class="inline-wrap">。修饰函数时，该函数只能在当前文件使用。也可以用在参数里面，修饰</span><span class="bg-lightgray inline-wrap">参数数组</span><span class="inline-wrap">。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>static</code></span><span class="inline-wrap">用于函数内部声明变量时，表示该变量只需要初始化一次，不需要在每次调用时都进行初始化。通常函数每次调用都会重新初始化。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">也就是说，在下一次调用时，保持上一次结束时的内部变量状态。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>static</code></span><span class="inline-wrap">修饰的变量初始化时，</span><span class="red inline-wrap">只能赋值为常量</span><span class="inline-wrap">，不能赋值为变量。</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>const</b></span><div class="wolai-block wolai-text"><div><span class="inline-wrap">在指针参数前面加上</span><span class="inline-wrap"><code>const</code></span><span class="inline-wrap">说明符，告诉编译器，函数内部不能修改该参数所指向的值。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">只限制修改</span><span class="inline-wrap"><code>p</code></span><span class="inline-wrap">所指向的值，而</span><span class="inline-wrap"><code>p</code></span><span class="inline-wrap">本身的地址是可以修改的：</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 该行报错</span>
  
  <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
  p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span> <span class="token comment">// 允许修改</span>
<span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">如果想限制修改</span><span class="inline-wrap"><code>p</code></span><span class="inline-wrap">，可以把</span><span class="inline-wrap"><code>const</code></span><span class="inline-wrap">放在</span><span class="inline-wrap"><code>p</code></span><span class="inline-wrap">前面：</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> <span class="token keyword">const</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
  p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span> <span class="token comment">// 该行报错</span>
<span class="token punctuation">}</span></pre></div></code-block></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">可变参数</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">pass</span></div></div></h3></h2><h2 class="wolai-block"><span class="inline-wrap">数组</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>sizeof(a) / sizeof(a[0])</code></span><span class="inline-wrap"> 求长度</span></div></div><h3 class="wolai-block"><span class="inline-wrap">数组初始化</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">大括号赋值</span><span class="bg-lightpink inline-wrap">只能在初始化时使用</span><span class="inline-wrap">，因为会改变指向的地址。大括号未初始化到的值自动初始化为<span class="jill"></span>0.</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">可以选择为特定位置成员赋值</span></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></div></code-block></div></h3><h3 class="wolai-block"><span class="inline-wrap">变长数组</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">pass</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">要实验一下</span></div></div></h3><h3 class="wolai-block"><span class="inline-wrap">数组的复制</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">一个方法是逐个复制</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">另一个是</span><span class="inline-wrap"><code>memcpy(a, b, sizeof(b))</code></span><span class="inline-wrap"> 从<span class="jill"></span>b<span class="jill"></span>复制到<span class="jill"></span>a</span></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">数组作为函数的参数</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">数组作为函数的参数，一般同时传入数组名和长度</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">sum_array</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="bg-lightgray inline-wrap">多维数组</span><span class="inline-wrap">则要将其他维的长度标明</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">sum_array</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="bg-lightgray inline-wrap">变长数组</span><span class="inline-wrap">作为函数参数，需要将变量<span class="jill"></span>n<span class="jill"></span>也一起作为函数参数，且放在数组之前</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">sum_array</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">因为函数原型可以</span><span class="bg-lightgray inline-wrap">省略参数名</span><span class="inline-wrap">，所以变长数组的原型中，可以使用*代替变量名，也可以省略变量名。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">sum_array</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">sum_array</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">数组字面量作为传入参数：</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token function">sum_array</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></h3></h2><h2 class="wolai-block"><span class="inline-wrap">字符串</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">字符单引号， 字符串双引号</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">反斜杠 </span><span class="inline-wrap"><code>\</code></span><span class="inline-wrap"> 转义双引号，或拆成两行（第二行必须顶格）</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">多行字符串的另一种写法</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span> greeting<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hello, "</span>
  <span class="token string">"how are you "</span>
  <span class="token string">"today!"</span><span class="token punctuation">;</span>
</pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">结尾字符 </span><span class="inline-wrap"><code>\0</code></span></li></ul><h3 class="wolai-block"><span class="inline-wrap">字符串声明</span><ol class="wolai-block"><li><div class="marker"></div><span class="inline-wrap">声明为字符数组。</span></li><li><div class="marker"></div><span class="inline-wrap">声明为指针</span></li></ol><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="red inline-wrap">指针指向的字符串，在 C 语言内部被当作常量，不能修改字符串本身</span><span class="inline-wrap">。</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span><span class="token operator">*</span> s <span class="token operator">=</span> <span class="token string">"Hello, world!"</span><span class="token punctuation">;</span>
s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'z'</span><span class="token punctuation">;</span> <span class="token comment">// 错误</span></pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">但字符数组的字符串可以这样改。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">原因：内存分配方式不同
</span><span class="inline-wrap"><a href="https://wangdoc.com/clang/string.html#字符串变量的声明"><span>https://wangdoc.com/clang/string.html#字符串变量的声明</span></a></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">指针变量可以指向其他字符串，字符数组不能。</span></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">字符串函数</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strlen()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>strlen()</code></span><span class="inline-wrap"> 返回</span><span class="inline-wrap"><code>\0</code></span><span class="inline-wrap">之前的字符数，</span><span class="inline-wrap"><code>sizeof()</code></span><span class="inline-wrap"> 返回字符串变量的长度</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token class-name">size_t</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">size_t 是无符号整数</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strcpy()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">将一个字符串赋值给字符数组变量。必须自行保证<span class="jill"></span>dest<span class="jill"></span>长度不小于<span class="jill"></span>source</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">strcpy(char dest[], const char source[])</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">字符串指针可以直接指向另一个字符串，不需要使用 </span><span class="inline-wrap"><code>strcpy()</code></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">实现的关键：while (*dest++ = *source++); </span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>*dest++</code></span><span class="inline-wrap">这个表达式等同于</span><span class="inline-wrap"><code>*(dest++)</code></span><span class="inline-wrap">，即先返回</span><span class="inline-wrap"><code>dest</code></span><span class="inline-wrap">这个地址，再进行自增运算移向下一个位置，而</span><span class="inline-wrap"><code>*dest</code></span><span class="inline-wrap">可以对当前位置赋值。</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strncpy()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>strncpy()</code></span><span class="inline-wrap">跟</span><span class="inline-wrap"><code>strcpy()</code></span><span class="inline-wrap">的用法完全一样，只是多了第<span class="jill"></span>3<span class="jill"></span>个参数，用来指定复制的最大字符数，防止溢出目标字符串变量的边界。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">如果达到了最大字符数，就会立刻终止，此时目标字符串将没有</span><span class="inline-wrap"><code>\0</code></span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token function">strncpy</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
str1<span class="token punctuation">[</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span></pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strcat()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">将第二个字符串的副本添加到第一个字符串的末尾</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">strcat</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strncat()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>strncat()</code></span><span class="inline-wrap">用于连接两个字符串，用法与</span><span class="inline-wrap"><code>strcat()</code></span><span class="inline-wrap">完全一致，只是增加了第三个参数，指定最大添加的字符数。一旦达到指定的字符数，或者在源字符串中遇到空字符</span><span class="inline-wrap"><code>\0</code></span><span class="inline-wrap">，就不再添加了.</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">strncat</span><span class="token punctuation">(</span>
  <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> dest<span class="token punctuation">,</span>
  <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> src<span class="token punctuation">,</span>
  <span class="token class-name">size_t</span> n
<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strcmp()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">按照字典顺序，如果两个字符串相同，返回值为</span><span class="inline-wrap"><code>0</code></span><span class="inline-wrap">；如果</span><span class="inline-wrap"><code>s1</code></span><span class="inline-wrap">小于</span><span class="inline-wrap"><code>s2</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>strcmp()</code></span><span class="inline-wrap">返回值小于<span class="jill"></span>0；如果</span><span class="inline-wrap"><code>s1</code></span><span class="inline-wrap">大于</span><span class="inline-wrap"><code>s2</code></span><span class="inline-wrap">，返回值大于<span class="jill"></span>0。</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">strncmp()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">指定了比较的字符数。</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">sprintf()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>sprintf()</code></span><span class="inline-wrap">函数跟</span><span class="inline-wrap"><code>printf()</code></span><span class="inline-wrap">类似，但是用于将数据写入字符串，而不是输出到显示器</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> format<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">字符串数组</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span><span class="token operator">*</span> weekdays<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"Monday"</span><span class="token punctuation">,</span>
  <span class="token string">"Tuesday"</span><span class="token punctuation">,</span>
  <span class="token string">"Wednesday"</span><span class="token punctuation">,</span>
  <span class="token string">"Thursday"</span><span class="token punctuation">,</span>
  <span class="token string">"Friday"</span><span class="token punctuation">,</span>
  <span class="token string">"Saturday"</span><span class="token punctuation">,</span>
  <span class="token string">"Sunday"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre></div></code-block><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">因为第一维的长度，编译器可以自动计算，所以可以省略。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">数组的第二维，长度统一定为<span class="jill"></span>10，有点浪费空间，因为大多数成员的长度都小于<span class="jill"></span>10。解决方法就是把数组的第二维，从字符数组改成字符指针。</span></li></ul></h3></h2><h2 class="wolai-block"><span class="inline-wrap">内存管理</span><h3 class="wolai-block"><span class="inline-wrap">void 指针</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">void 指针是不定类型指针。使用时需要向编译器补充说明是什么类型指针。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">可强制转换，也可隐式转换。</span></div></div></h3><h3 class="wolai-block"><span class="inline-wrap">内存管理函数</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">malloc()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">返回<span class="jill"></span>void*</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">通常配合<span class="jill"></span>sizeof()</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">检查: </span><span class="inline-wrap"><code>if (NULL == p)</code></span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">free()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">接受不定指针作为参数，释放分配给该指针的内存</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">calloc()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>calloc()</code></span><span class="inline-wrap">接受两个参数，第一个参数是某种数据类型的值的数量，第二个是该数据类型的单位字节长度。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>calloc()</code></span><span class="red inline-wrap">会将所分配的内存全部初始化为</span><span class="red inline-wrap"><code>0</code></span><span class="inline-wrap">。</span><span class="inline-wrap"><code>malloc()</code></span><span class="inline-wrap">不会对内存进行初始化，如果想要初始化为</span><span class="inline-wrap"><code>0</code></span><span class="inline-wrap">，还要额外调用</span><span class="inline-wrap"><code>memset()</code></span><span class="inline-wrap">函数。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token function">calloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等同于</span>
<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">memset</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">realloc()</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">realloc</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> block<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">参数：重新分配的指针，新内存大小</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">和<span class="jill"></span>malloc()一样，不会初始化内存</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">memcpy()</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">memcpy</span><span class="token punctuation">(</span>
  <span class="token keyword">void</span><span class="token operator">*</span> restrict dest<span class="token punctuation">,</span> 
  <span class="token keyword">void</span><span class="token operator">*</span> restrict source<span class="token punctuation">,</span> 
  <span class="token class-name">size_t</span> n
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">目标地址和源地址都是受限指针，说明两者不能有重叠</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">是<span class="jill"></span>strcpy<span class="jill"></span>的高位替代。更安全也更快</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>memcpy(t, s, sizeof(s));</code></span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">memmove()</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>memcpy()</code></span><span class="inline-wrap"> 的允许重叠版</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">它很聪明的, 如果地址<span class="jill"></span>src&lt;dst, 就从后往前复制，反之从前往后</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> <span class="token string">"foo-bar"</span><span class="token punctuation">;</span>
<span class="token function">memcpy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>str<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>str<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//might blow up</span>
<span class="token function">memmove</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>str<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>str<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//fine</span>
</pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token comment">/* memcpy might work fine, but we should'n do.
a, b, c, d */</span>
<span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
<span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span>
<span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span>
<span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span>
<span class="token function">memmove</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">memmove</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">memcpy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">memcpy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span>
<span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span>
<span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span>
<span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span></pre></div></code-block></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">memcpy()</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">memcmp</span><span class="token punctuation">(</span>
  <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> s1<span class="token punctuation">,</span>
  <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> s2<span class="token punctuation">,</span>
  <span class="token class-name">size_t</span> n
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">按字典顺序比较两个字符串的前<span class="jill"></span>n<span class="jill"></span>个字符，中间有</span><span class="inline-wrap"><code>\0</code></span><span class="inline-wrap"> 也可以</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">-1， 0， 1</span></div></div></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">restrict</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">声明指针变量时，可以使用</span><span class="inline-wrap"><code>restrict</code></span><span class="inline-wrap">说明符，告诉编译器，该块内存区域</span><span class="red inline-wrap">只有当前指针一种访问方式，其他指针不能读写该块内存</span><span class="inline-wrap">。这种指针称为“受限指针”（restrict pointer）。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">int</span><span class="token operator">*</span> restrict p<span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></h3></h2><h2 class="wolai-block"><span class="inline-wrap">struct</span><h3 class="wolai-block"><span class="inline-wrap">结构的创建</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">建议配合<span class="jill"></span>typedef</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">struct</span> <span class="token class-name">car</span> <span class="token punctuation">{</span>
  <span class="token keyword">char</span><span class="token operator">*</span> name<span class="token punctuation">;</span>
  <span class="token keyword">float</span> price<span class="token punctuation">;</span>
  <span class="token keyword">int</span> speed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 1. 按顺序</span>
<span class="token keyword">struct</span> <span class="token class-name">car</span> saturn <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Saturn SL/2"</span><span class="token punctuation">,</span> <span class="token number">16000.99</span><span class="token punctuation">,</span> <span class="token number">175</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 不按顺序，要指定属性名</span>
<span class="token keyword">struct</span> <span class="token class-name">car</span> saturn <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>speed<span class="token operator">=</span><span class="token number">172</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"Saturn SL/2"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 一次性结构体变量（可以先不赋值）</span>
<span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token keyword">char</span> title<span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">char</span> author<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">float</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span> b1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Harry Potter"</span><span class="token punctuation">,</span> <span class="token string">"J. K. Rowling"</span><span class="token punctuation">,</span> <span class="token number">10.0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  b2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Cancer Ward"</span><span class="token punctuation">,</span> <span class="token string">"Aleksandr Solzhenitsyn"</span><span class="token punctuation">,</span> <span class="token number">7.85</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div></code-block></h3><h3 class="wolai-block"><span class="inline-wrap">结构的占用内存</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">不是各个属性的总和。而是每个属性都会向上取到<span class="jill"></span>int(多为<span class="jill"></span>4)的倍数。</span></div></div></h3><h3 class="wolai-block"><span class="inline-wrap">结构数组</span><div class="wolai-block wolai-text"><div><span class="inline-wrap">跟普通数组差不多那么用</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">struct</span> <span class="token class-name">fraction</span> numbers<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></div></code-block></h3><h3 class="wolai-block"><span class="inline-wrap">结构的复制</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">struct 变量可以直接用等号</span><span class="inline-wrap"><code>=</code></span><span class="inline-wrap">复制，这会生成一个</span><span class="red inline-wrap">全新的副本</span><span class="inline-wrap">。和数组不一样。不同类型的结构体无法赋值。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">只有含有指针属性时，修改结构副本才会对原本有影响。</span></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">结构指针</span><div class="wolai-block wolai-text"><div><span class="red inline-wrap">如果将 struct 变量传入函数，函数内部得到的是一个原始值的副本</span><span class="inline-wrap">。因此需要指针。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>→</code></span><span class="inline-wrap"> 取一个结构指针的属性，</span><span class="inline-wrap"><code>.</code></span><span class="inline-wrap">取一个结构的属性</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token comment">// ptr == &amp;myStruct</span>
myStruct<span class="token punctuation">.</span>prop <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token operator">*</span>ptr<span class="token punctuation">)</span><span class="token punctuation">.</span>prop <span class="token operator">==</span> ptr<span class="token operator">-></span>prop</pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">happy</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">turtle</span><span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者</span>
<span class="token keyword">void</span> <span class="token function">happy</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">turtle</span><span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  t<span class="token operator">-></span>age <span class="token operator">=</span> t<span class="token operator">-></span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div></code-block></h3><h3 class="wolai-block"><span class="inline-wrap">链表结构</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">struct</span> <span class="token class-name">node</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> data<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token operator">*</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">add_node</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NULL</span> <span class="token operator">==</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>cur <span class="token operator">=</span> head<span class="token punctuation">;</span> cur<span class="token operator">-></span>next <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cur<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cur<span class="token operator">-></span>next<span class="token operator">-></span>data <span class="token operator">=</span> x<span class="token punctuation">;</span>
    cur<span class="token operator">-></span>next<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">print_list</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token operator">*</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NULL</span> <span class="token operator">==</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Empty list!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> head<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">struct</span> <span class="token class-name">node</span> <span class="token operator">*</span>cur <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>cur <span class="token operator">=</span> head<span class="token operator">-></span>next<span class="token punctuation">;</span> cur<span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"-> %d "</span><span class="token punctuation">,</span> cur<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">node</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">print_list</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">add_node</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>nums<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print_list</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">add_node</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>nums<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print_list</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">print_list</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">输出：</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token number">4</span>
<span class="token number">4</span> <span class="token operator">-></span> <span class="token number">8</span>
<span class="token number">4</span> <span class="token operator">-></span> <span class="token number">8</span> <span class="token operator">-></span> <span class="token number">7</span>
Empty list<span class="token operator">!</span></pre></div></code-block></h3><h3 class="wolai-block"><span class="inline-wrap">位字段</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"></span><br/></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string.h></span></span>

<span class="token keyword">struct</span> <span class="token class-name">syn</span> <span class="token punctuation">{</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> f1<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span>   <span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> f2<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> synth<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"struct length: %ld\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">syn</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d\n"</span><span class="token punctuation">,</span> synth<span class="token punctuation">.</span>f1<span class="token punctuation">,</span> synth<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    synth<span class="token punctuation">.</span>f1 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> synth<span class="token punctuation">.</span>f1<span class="token punctuation">;</span>
    synth<span class="token punctuation">.</span>f2 <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d\n"</span><span class="token punctuation">,</span> synth<span class="token punctuation">.</span>f1<span class="token punctuation">,</span> synth<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token comment">// 输出</span>
<span class="token keyword">struct</span> <span class="token class-name">length</span><span class="token operator">:</span> <span class="token number">4</span>
<span class="token number">0</span> <span class="token number">0</span>
<span class="token number">1</span> <span class="token number">1</span></pre></div></code-block></h3><h3 class="wolai-block"><span class="inline-wrap">弹性数组</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">struct 中的数组可以不预设长度，但应该用属性记录实际使用时的长度</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">struct</span> <span class="token class-name">vstring</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> len<span class="token punctuation">;</span>
  <span class="token keyword">char</span> chars<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token comment">// 分配空间要手动加上 长度n * sizeof(char)</span>
<span class="token keyword">struct</span> <span class="token class-name">vstring</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">vstring</span><span class="token punctuation">)</span> <span class="token operator">+</span> n <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str<span class="token operator">-></span>len <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></div></code-block></h3></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap">((id#oty1HA8pXf5Bw4redoYonS))</span></div></div><h2 class="wolai-block"><span class="inline-wrap">typedef</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">同时有</span><span class="inline-wrap"><code>[]</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>*</code></span><span class="inline-wrap"> ，</span><span class="inline-wrap"><code>[]</code></span><span class="inline-wrap">优先级更高</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">char</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等价于</span>

<span class="token keyword">typedef</span> <span class="token keyword">char</span> <span class="token punctuation">(</span><span class="token operator">*</span>Func<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> Func Arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Arr<span class="token operator">*</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>x</code></span><span class="inline-wrap">是一个函数，返回一个指向 Arr 类型的指针。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>Arr</code></span><span class="inline-wrap">是一个数组，有<span class="jill"></span>5<span class="jill"></span>个成员，每个成员是</span><span class="inline-wrap"><code>Func</code></span><span class="inline-wrap">类型。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>Func</code></span><span class="inline-wrap">是一个函数指针，指向一个无参数、返回字符值的函数。</span></li></ul></h2><h2 class="wolai-block"><span class="inline-wrap">Union</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">语法类似<span class="jill"></span>struct</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">一个<span class="jill"></span>Union<span class="jill"></span>可以包含不同类型的属性</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">同时只会有一个属性生效, 赋值了其中一个属性，其他属性就会失效</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">它内部可以包含各种属性，但同一时间只能有一个属性，因为所有属性都保存在同一个内存地址，后面写入的属性会覆盖前面的属性。这样做的最大好处是节省空间。</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">union</span> quantity <span class="token punctuation">{</span>
    <span class="token keyword">short</span> count<span class="token punctuation">;</span>
    <span class="token keyword">float</span> weight<span class="token punctuation">;</span>
    <span class="token keyword">float</span> volume<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">union</span> quantity q<span class="token punctuation">;</span>
    q<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"count: %d\n"</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//count: 4</span>

    <span class="token comment">// 不用->直接取(符合类型的)属性</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>int_p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>q<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"count: %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>int_p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//count: 4</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></h2><h2 class="wolai-block"><span class="inline-wrap">Enum</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">枚举类型的定义是此类型的变量所有可能的取值</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">每种取值会对应一个常量</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">enum</span> <span class="token class-name">colors</span> <span class="token punctuation">{</span>RED<span class="token punctuation">,</span> GREEN<span class="token punctuation">,</span> BLUE<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> RED<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> GREEN<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> BLUE<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span></pre></div></code-block><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">可以指定常量，其后的常量值递增</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">常量值可以相等</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token keyword">enum</span> <span class="token punctuation">{</span>
  A<span class="token punctuation">,</span>    <span class="token comment">// 0</span>
  B<span class="token punctuation">,</span>    <span class="token comment">// 1</span>
  C <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>  <span class="token comment">// 4</span>
  D<span class="token punctuation">,</span>    <span class="token comment">// 5</span>
  E<span class="token punctuation">,</span>    <span class="token comment">// 6</span>
  F <span class="token operator">=</span> <span class="token number">3</span>   <span class="token comment">// 3</span>
  G<span class="token punctuation">,</span>    <span class="token comment">// 4</span>
  H     <span class="token comment">// 5</span>
<span class="token punctuation">}</span></pre></div></code-block></h2><h2 class="wolai-block"><span class="inline-wrap">预处理器</span><h3 class="wolai-block"><span class="inline-wrap">预处理器的工作</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">清理代码：删除注释，多行语句合成一个逻辑行</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">执行</span><span class="inline-wrap"><code>#</code></span><span class="inline-wrap"> 开头的预处理指令</span></li></ul></h3><h3 class="wolai-block"><span class="inline-wrap">预处理指令</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">每个预处理指令都以</span><span class="inline-wrap"><code>#</code></span><span class="inline-wrap">开头，放在一行的行首，指令前面可以有空白字符（比如空格或制表符）。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">所有预处理指令都是一行的，除非在行尾使用反斜杠，将其折行。指令结尾处不需要分号。</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b> #define</b></span><span class="inline-wrap"> 宏</span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">直接替换</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">命名规则和变量一样，习惯大写</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">习惯上放头部，其实可以放任何地方</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">宏可以包含宏</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">可以重复定义，但重复定义必须相同</span></li></ul></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>带参数宏</b></span></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SQUARE</span><span class="token expression"><span class="token punctuation">(</span>X<span class="token punctuation">)</span> X<span class="token operator">*</span>X</span></span></pre></div></code-block><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">为了避免意外的错误，最好多加一层括号</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SQUARE</span><span class="token expression"><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token punctuation">(</span>X<span class="token operator">*</span>X<span class="token punctuation">)</span></span></span></pre></div></code-block><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">也可以空参（其实括号可以省略）</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">getchar</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">getc</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span></span></span></pre></div></code-block><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">可以宏嵌套</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">可以方便地代替函数</span></li></ul></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b> 不定参数宏</b></span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">有点像<span class="jill"></span>python 的拆包，但只能省略尾部</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__VA_ARGS__</code></span><span class="inline-wrap">代表多余的参数</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">下面这个宏只要要两个参数</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">X</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> __VA_ARGS__</span></span>

<span class="token function">X</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token string">"Hi!"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
<span class="token comment">// 替换成</span>
<span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token string">"Hi!"</span><span class="token punctuation">,</span> <span class="token number">12</span>
</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>#</code></span><span class="inline-wrap"><b><code>VA_ARGS</code></b></span><span class="inline-wrap"> 还能把剩下的参数转成一个字符串</span></div></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b><code>#</code></b></span><span class="inline-wrap"><b> 运算符</b></span><span class="inline-wrap">（酷诶）</span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">在被替换部分前面加上</span><span class="inline-wrap"><code>#</code></span><span class="inline-wrap"> ， 可以指定替换为字符串类型</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">STR</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> #x</span></span>

<span class="token comment">// 等同于 printf("%s\n", "3.14159");</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> <span class="token function">STR</span><span class="token punctuation">(</span><span class="token number">3.14159</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">XNAME</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span> </span><span class="token string">"x"</span><span class="token directive-hash">#</span><span class="token directive keyword">n</span></span>

<span class="token comment">// 输出 x4</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> <span class="token function">XNAME</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b><code>##</code></b></span><span class="inline-wrap"><b> 运算符 </b></span><span class="inline-wrap">（这个才更醋！批量生成变量名和标识符！）</span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>##</code></span><span class="inline-wrap">运算符起到粘合作用，将参数“嵌入”一个标识符之中。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">MK_ID</span><span class="token expression"><span class="token punctuation">(</span>n<span class="token punctuation">)</span> i</span><span class="token punctuation">##</span><span class="token expression">n</span></span>

<span class="token keyword">int</span> <span class="token function">MK_ID</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MK_ID</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MK_ID</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 替换成</span>
<span class="token keyword">int</span> i1<span class="token punctuation">,</span> i2<span class="token punctuation">,</span> i3<span class="token punctuation">;</span>
</pre></div></code-block></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#undef</b></span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">取消已经定义的宏</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LIMIT</span> <span class="token expression"><span class="token number">400</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">undef</span> <span class="token expression">LIMIT </span></span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">这个</span><span class="inline-wrap"><code>#undef</code></span><span class="inline-wrap"> 相当于</span><span class="inline-wrap"><code>$ gcc -ULIMIT foo.c</code></span></div></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#include</b></span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>&lt;&gt;</code></span><span class="inline-wrap">表示该文件是系统提供的, 通常是标准库文件，不需要写路径</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>&quot;&quot;</code></span><span class="inline-wrap"> 表示该文件由用户提供，具体的路径取决于编译器的设置，可能是当前目录，也可能是项目的工作目录。</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">GCC 编译器的</span><span class="inline-wrap"><code>-I</code></span><span class="inline-wrap">参数，也可以用来指定</span><span class="inline-wrap"><code>include</code></span><span class="inline-wrap">命令中用户文件的加载路径。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>$ gcc -Iinclude/ -o code code.c</code></span></li></ul></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#if...#endif</b></span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">符合条件时执行宏</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">HAPPY_FACTOR <span class="token operator">==</span> <span class="token number">0</span></span></span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'm not happy!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">HAPPY_FACTOR <span class="token operator">==</span> <span class="token number">1</span></span></span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'm just regular\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'm extra happy!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endi</span></span></pre></div></code-block></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#ifdef...#endif</b></span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>#ifdef...#endif</code></span><span class="inline-wrap">指令用于判断某个宏是否定义过。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">可以配合</span><span class="inline-wrap"><code>#else</code></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>#ifdef</code></span><span class="inline-wrap">指令，等同于</span><span class="inline-wrap"><code>#if defined</code></span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">defined FOO</span></span>
  x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">defined BAR</span></span>
  x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></div></code-block></li></ul></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#ifndef</b></span></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">通常为了防止头文件</span><span class="inline-wrap"><code>myheader.h</code></span><span class="inline-wrap">被重复加载，可以把它放在</span><span class="inline-wrap"><code>#ifndef...#endif</code></span><span class="inline-wrap">里面加载。</span></li></ul></div><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><b>预定义宏</b></span><span class="inline-wrap"> （又一个酷诶的东西出现了）</span></summary><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__DATE__</code></span><span class="inline-wrap">：编译日期，格式为“Mmm dd yyyy”的字符串（比如 Nov 23 2021）。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__TIME__</code></span><span class="inline-wrap">：编译时间，格式为“hh:mm:ss”。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__FILE__</code></span><span class="inline-wrap">：当前文件名。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__LINE__</code></span><span class="inline-wrap">：当前行号。</span><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>#line</code></span><span class="inline-wrap">指令用于覆盖预定义宏</span><span class="inline-wrap"><code>__LINE__</code></span><span class="inline-wrap">，将其改为自定义的行号。后面的行将从</span><span class="inline-wrap"><code>__LINE__</code></span><span class="inline-wrap">的新值开始计数。</span></div></div></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__func__</code></span><span class="inline-wrap">：当前正在执行的函数名。该预定义宏必须在函数作用域使用。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__STDC__</code></span><span class="inline-wrap">：如果被设为<span class="jill"></span>1，表示当前编译器遵循 C 标准。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__STDC_HOSTED__</code></span><span class="inline-wrap">：如果被设为<span class="jill"></span>1，表示当前编译器可以提供完整的标准库；否则被设为<span class="jill"></span>0（嵌入式系统的标准库常常是不完整的）。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>__STDC_VERSION__</code></span><span class="inline-wrap">：编译所使用的 C 语言版本，是一个格式为</span><span class="inline-wrap"><code>yyyymmL</code></span><span class="inline-wrap">的长整数，C99 版本为“199901L”，C11 版本为“201112L”，C17 版本为“201710L”。</span></li></ul><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"This function: %s\n"</span><span class="token punctuation">,</span> <span class="token constant">__func__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"This file: %s\n"</span><span class="token punctuation">,</span> <span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"This line: %d\n"</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Compiled on: %s %s\n"</span><span class="token punctuation">,</span> <span class="token constant">__DATE__</span><span class="token punctuation">,</span> <span class="token constant">__TIME__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"C Version: %ld\n"</span><span class="token punctuation">,</span> __STDC_VERSION__<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 输出如下

This function: main
This file: test.c
This line: 7
Compiled on: Mar 29 2021 19:19:37
C Version: 201710

*/</span></pre></div></code-block></details><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#error</b></span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>#error</code></span><span class="inline-wrap">指令用于让预处理器抛出一个错误，终止编译。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="C" class="marker"></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">__STDC_VERSION__ <span class="token operator">!=</span> <span class="token number">201112L</span></span></span>
  <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">error</span> <span class="token expression">Not C11</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>// 报错信息
$ gcc -std<span class="token operator">=</span>c99 newish.c
newish.c:14:2: error: <span class="token comment">#error Not C11</span>
</pre></div></code-block></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>#pragma</b></span></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>#pragma</code></span><span class="inline-wrap">指令用来修改编译器属性。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>// 使用 C99 标准
<span class="token comment">#pragma c9x on</span></pre></div></code-block></div></h3></h2><div class="wolai-block wolai-text"><div></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">回到</span><span><a href="https://www.wolai.com/75BmLzwAhvBJVAZukQo2mK#tccGkEJxfM7TxSf6zCVaYq" class="wolai-bi-link"><span></span></a></span></div></div></article><footer></footer></body></html>